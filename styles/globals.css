@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme configuration */
:root {
	--background: 255 255 255;
	--foreground: 0 0 0;
}

.dark {
	--background: 0 0 0;
	--foreground: 255 255 255;
}

/* Limit transitions to safe properties and provide utilities for performant animations.
   Prefer animating transform and opacity only (GPU compositable). */
.theme-transition {
	/* only theme color changes here */
	transition: background-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
		color 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Utility: transition only transform and opacity (fast, composited) */
.transition-perf {
	transition-property: transform, opacity;
	transition-duration: 180ms;
	transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Helper to force composite layer when necessary (use sparingly) */
.composite {
	transform: translateZ(0);
	will-change: transform, opacity;
}

/* Mobile slide-in animation: uses only transform and opacity for GPU compositing */
@keyframes mobile-slide-in {
	from {
		transform: translateY(-8px);
		opacity: 0;
	}

	to {
		transform: translateY(0);
		opacity: 1;
	}
}

.mobile-slide-in {
	animation: mobile-slide-in 180ms cubic-bezier(0.4, 0, 0.2, 1) both;
	will-change: transform, opacity;
}

/* Degradado radial */
/* Lightweight radial accent for desktops; removed heavy transparency and large height for mobile perf */
.radial-gradient {
	position: absolute;
	top: -30%;
	left: 50%;
	transform: translateX(-50%);
	width: 120%;
	height: 60%;
	background: radial-gradient(ellipse at center,
			rgba(155, 39, 176, 0.28) 0%,
			rgba(123, 31, 162, 0.18) 50%,
			rgba(59, 7, 109, 0) 100%);
	pointer-events: none;
	z-index: 0;
}

/* Hide heavy accent on small screens */
@media (max-width: 640px) {
	.radial-gradient {
		display: none;
	}
}

/* Navbar isolation to avoid repaints affecting the whole page */
.site-navbar {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	z-index: 1000;
	background: rgba(var(--background), 0.95);
	backdrop-filter: none;
	/* avoid expensive filters on mobile */
	/* keep simple to avoid rasterization artifacts on mobile */
	transform: none;
	will-change: auto;
}

/* Apply global fixes to avoid compositing artifacts on mobile scroll */
html,
body,
#__next {
	background-color: rgb(var(--background));
}

html,
body {
	overscroll-behavior: contain;
}

@media (max-width: 640px) {

	/* Disable heavy animated/background layers on mobile permanently */
	.radial-gradient,
	.blur-3xl,
	.blur-xl,
	.blur-lg,
	.animate-pulse,
	.animate-bounce {
		display: none !important;
		animation: none !important;
		filter: none !important;
	}

	/* Make any `transition-all`/`transition-colors` safe on small screens by
	   limiting them to transform and opacity to avoid layout/paint transitions. */
	.transition-all,
	.transition-colors,
	.transition-opacity {
		transition-property: transform, opacity !important;
		transition-duration: 180ms !important;
		transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
	}

	/* Disable backdrop-blur utilities on mobile to avoid expensive compositing */
	.backdrop-blur,
	.backdrop-blur-sm,
	.backdrop-blur-md,
	.backdrop-blur-lg,
	.backdrop-blur-xl {
		backdrop-filter: none !important;
		-webkit-backdrop-filter: none !important;
		filter: none !important;
	}

	/* Utility: make hover scaling/composition less aggressive on mobile */
	[class*="hover:scale-105"],
	[class*="hover:scale-110"] {
		transform: none !important;
	}
}

@font-face {
	font-family: 'Coolvetica';
	src: url('../public/fonts/coolvetica/coolvetica_rg.otf') format('opentype');
	font-weight: normal;
}

.font {
	font-family: 'Coolvetica', sans-serif;
}
